

##### Prompt > RestHttpClientApp_Aiassisted_Product.java êµ¬í˜„

0. Domain Object  : Product.java

package com.model2.mvc.service.domain;

import java.sql.Date;


//==>ìƒí’ˆì •ë³´ë¥¼ ëª¨ë¸ë§(ì¶”ìƒí™”/ìº¡ìŠí™”)í•œ Bean
package com.model2.mvc.service.domain;

import java.sql.Date;

//==>íšŒì›ì •ë³´ë¥¼ ëª¨ë¸ë§(ì¶”ìƒí™”/ìº¡ìŠí™”)í•œ Bean
public class Product {
	
	///Field
	private int prodNo;
	private String prodName;
	private String prodDetail;
	private String manuDate;
	private int price;
	private String fileName; 
	private Date regDate;
	private String proTranCode;
	
	///Constructor
	public Product() {
	}
	///Method 
	
	public String getProTranCode() { return proTranCode;}
	public void setProTranCode(String proTranCode) {this.proTranCode=proTranCode;}
	
	public int getProdNo() {		return prodNo;	}
	public void setProdNo(int prodNo) {		this.prodNo=prodNo;	}
	
	public String getProdName() { return prodName;}
	public void setProdName(String prodName) { this.prodName=prodName; }
	
	public String getProdDetail() { return prodDetail; }
	public void setProdDetail(String prodDetail) {this.prodDetail=prodDetail;}
	public String getManuDate() { return manuDate; }
	public void setManuDate(String manuDate) { this.manuDate=manuDate; }
	
	public int getPrice() { return price; }
	public void setPrice(int price) {this.price = price; }
	
	public String getFileName() { return fileName; }
	public void setFileName(String fileName) { this.fileName=fileName;}
		
	public Date getRegDate() { return regDate; }
	public void setRegDate(Date regDate) { this.regDate=regDate; }
		
	@Override
	public String toString() {
		return "Product Domain : " +getClass().getSimpleName() + " :: " + prodNo + " / " +  prodName + " / " +  manuDate + " / " +  price + " / " +  fileName + " / " + regDate ;
	}
}
	
	


1. RestController : ProductRestController.java   

package com.model2.mvc.web.product;

import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.web.bind.annotation.*;

import com.model2.mvc.common.Search;
import com.model2.mvc.service.domain.Product;
import com.model2.mvc.service.product.ProductService;

@RestController  // ğŸ’¡ JSON ë°˜í™˜ì„ ìœ„í•œ REST Controller ì„ ì–¸
@RequestMapping("/product/json")  // ğŸ’¡ URL prefix ì„¤ì •
public class ProductRestController {

    @Autowired
    @Qualifier("productServiceImpl")
    private ProductService productService;

    public ProductRestController() {
        System.out.println("==> ProductRestController ìƒì„±ë¨");
    }

    /**
     * âœ… 1. ìƒí’ˆ ë“±ë¡
     * @param product : ë“±ë¡í•  ìƒí’ˆ ì •ë³´
     * @throws Exception
     * @return ë“±ë¡ëœ ìƒí’ˆ ì •ë³´(JSON)
     * ğŸ“Œ ì˜ˆì œ URL: POST /product/json/addProduct
     * ğŸ“Œ Content-Type: application/json
     * {
     *     "prodName": "iPhone 15",
     *     "prodDetail": "Apple ì‹ í˜• ìŠ¤ë§ˆíŠ¸í°",
     *     "manuDate": "2025-09-01",
     *     "price": 1500000,
     *     "fileName": "iphone15.jpg"
     * }
     */
    @PostMapping("/addProduct")
    public Product addProduct(@RequestBody Product product) throws Exception {
        System.out.println("â–¶ REST:: addProduct() í˜¸ì¶œë¨");
        productService.addProduct(product);
        return product;
    }

    /**
     * âœ… 2. ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
     * @param prodNo : ìƒí’ˆ ë²ˆí˜¸ (ê²½ë¡œë³€ìˆ˜)
     * @return í•´ë‹¹ ìƒí’ˆ ì •ë³´(JSON)
     * ğŸ“Œ ì˜ˆì œ URL: GET /product/json/getProduct/10001
     */
    @GetMapping("/getProduct/{prodNo}")
    public Product getProduct(@PathVariable int prodNo) throws Exception {
        System.out.println("â–¶ REST:: getProduct() í˜¸ì¶œë¨ - prodNo: " + prodNo);
        return productService.getProduct(prodNo);
    }

    /**
     * âœ… 3. ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
     * @param search : ê²€ìƒ‰ ì¡°ê±´ ë° í˜ì´ì§€ ì •ë³´
     * @return ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ + ì „ì²´ ê°œìˆ˜(JSON)
     * ğŸ“Œ ì˜ˆì œ URL: GET /product/json/getProductList?currentPage=1&pageSize=10
     */
    @GetMapping("/getProductList")
    public Map<String, Object> getProductList(@ModelAttribute Search search) throws Exception {
        System.out.println("â–¶ REST:: getProductList() í˜¸ì¶œë¨ - page: " + search.getCurrentPage());
        
        if (search.getCurrentPage() == 0) {
            search.setCurrentPage(1);
        }
        if (search.getPageSize() == 0) {
            search.setPageSize(10);  // ê¸°ë³¸ í˜ì´ì§€ ì‚¬ì´ì¦ˆ
        }

        return productService.getProductList(search);
    }

    /**
     * âœ… 4. ìƒí’ˆ ì •ë³´ ìˆ˜ì •
     * @param product : ìˆ˜ì •í•  ìƒí’ˆ ì •ë³´ (JSON)
     * @return ìˆ˜ì • ì™„ë£Œëœ ìƒí’ˆ ì •ë³´(JSON)
     * ğŸ“Œ ì˜ˆì œ URL: PUT /product/json/updateProduct
     * ğŸ“Œ Content-Type: application/json
     * {
     *     "prodNo": 10001,
     *     "prodName": "iPhone 15 Pro",
     *     ...
     * }
     */
    @PutMapping("/updateProduct")
    public Product updateProduct(@RequestBody Product product) throws Exception {
        System.out.println("â–¶ REST:: updateProduct() í˜¸ì¶œë¨ - prodNo: " + product.getProdNo());

        productService.updateProduct(product);
        return product;
    }
}


2. Search.java

package com.model2.mvc.common;


//==>ë¦¬ìŠ¤íŠ¸í™”ë©´ì„ ëª¨ë¸ë§(ì¶”ìƒí™”/ìº¡ìŠí™”)í•œ Bean 
public class Search {
	
	///Field
	private int currentPage;
	private String searchCondition;
	private String searchKeyword;
	private int pageSize;
	//==> ë¦¬ìŠ¤íŠ¸í™”ë©´ currentPageì— í•´ë‹¹í•˜ëŠ” íšŒì›ì •ë³´ë¥¼ ROWNUM ì‚¬ìš© SELECT ìœ„í•´ ì¶”ê°€ëœ Field 
	//==> UserMapper.xml ì˜ 
	//==> <select  id="getUserList"  parameterType="search"	resultMap="userSelectMap">
	//==> ì°¸ì¡°
	private int endRowNum;
	private int startRowNum;
	
	///Constructor
	public Search() {
	}
	
	///Method
	public int getPageSize() {
		return pageSize;
	}
	public void setPageSize(int paseSize) {
		this.pageSize = paseSize;
	}
	
	public int getCurrentPage() {
		return currentPage;
	}
	public void setCurrentPage(int currentPage) {
		this.currentPage = currentPage;
	}

	public String getSearchCondition() {
		return searchCondition;
	}
	public void setSearchCondition(String searchCondition) {
		this.searchCondition = searchCondition;
	}
	
	public String getSearchKeyword() {
		return searchKeyword;
	}
	public void setSearchKeyword(String searchKeyword) {
		this.searchKeyword = searchKeyword;
	}
	
	//==> Select Query ì‹œ ROWNUM ë§ˆì§€ë§‰ ê°’ 
	public int getEndRowNum() {
		return getCurrentPage()*getPageSize();
	}
	//==> Select Query ì‹œ ROWNUM ì‹œì‘ ê°’
	public int getStartRowNum() {
		return (getCurrentPage()-1)*getPageSize()+1;
	}

	@Override
	public String toString() {
		return "Search [currentPage=" + currentPage + ", searchCondition="
				+ searchCondition + ", searchKeyword=" + searchKeyword
				+ ", pageSize=" + pageSize + ", endRowNum=" + endRowNum
				+ ", startRowNum=" + startRowNum + "]";
	}
}


3. ì‚¬ìš© 3rd-part Lib
: httpcomponents-client-4.3.4 ì‚¬ìš©í•˜ì§€ ì•Šê³  HttpURLConnection ì‚¬ìš© 
: jackson-core-asl-1.9.13.jar / - jackson-mapper-asl-1.9.13.jar 


4.  ProductRestController ì˜ ê°ê°ì˜ Method Test í•˜ëŠ” Static Method êµ¬í˜„
: ì˜ˆ> addProduct() Test í•  ê²½ìš°. addProduct_test()

5. ìì„¸í•œ ì£¼ì„ ì²˜ë¦¬ 
ë¶€ë¶„ë³„ ìš©ë„ ì„¤ëª…
ì „ë‹¬ ë‚´ìš© ë° ë°©í–¥
ê²°ê³¼
ì˜ˆì œURL ì œê³µ
